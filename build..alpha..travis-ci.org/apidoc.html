<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/Automattic/cloudup-cli#readme"

    >up (v0.7.0)</a>
</h1>
<h4>cloudup command-line executable</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.up">module up</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.client">
            function <span class="apidocSignatureSpan">up.</span>client
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console">
            function <span class="apidocSignatureSpan">up.</span>console
            <span class="apidocSignatureSpan">(stream, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.readConfig">
            function <span class="apidocSignatureSpan">up.</span>readConfig
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.saveConfig">
            function <span class="apidocSignatureSpan">up.</span>saveConfig
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">up.</span>console.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">up.</span>configPath</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.up.console">module up.console</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.console">
            function <span class="apidocSignatureSpan">up.</span>console
            <span class="apidocSignatureSpan">(stream, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.up.console.prototype">module up.console.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.aggregate">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>aggregate
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.log">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>log
            <span class="apidocSignatureSpan">(y, key, str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.onend">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>onend
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.onitem">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>onitem
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.onsave">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>onsave
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.progress">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>progress
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.up.console.prototype.update">
            function <span class="apidocSignatureSpan">up.console.prototype.</span>update
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.up" id="apidoc.module.up">module up</a></h1>


    <h2>
        <a href="#apidoc.element.up.client" id="apidoc.element.up.client">
        function <span class="apidocSignatureSpan">up.</span>client
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">client = function (opts){
  opts = opts || {};
  opts.useragent = &#x27;cloudup-cli/&#x27; + pkg.version;
  if (process.env.UP_API_URL) opts.url = process.env.UP_API_URL;
  if (process.env.UP_CLOUDUP_URL) opts.cloudupUrl = process.env.UP_CLOUDUP_URL;
  return new Cloudup(opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console" id="apidoc.element.up.console">
        function <span class="apidocSignatureSpan">up.</span>console
        <span class="apidocSignatureSpan">(stream, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Console(stream, options) {
  this.y = 0;
  this.newlines = 0;
  this.items = [];
  this.cursor = ansi(process.stdout);
  this.stream = stream;
  this.direct = options.direct;
  this.progressOnly = options.progressOnly;

  // bind event listeners to `this`
  this.onitem = this.onitem.bind(this);
  this.onsave = this.onsave.bind(this);
  this.onend = this.onend.bind(this);

  // attach event listeners to `stream`
  stream.on(&#x27;item&#x27;, this.onitem);
  stream.on(&#x27;save&#x27;, this.onsave);
  stream.on(&#x27;end&#x27;, this.onend);

  // setup the cursor and global event listeners
  this.cursor.hide();
  var self = this;
  function showCursor(){
    self.cursor.show();
  }
  process.on(&#x27;uncaughtException&#x27;, showCursor);
  process.on(&#x27;uncaughtException&#x27;, fatal);
  process.on(&#x27;exit&#x27;, showCursor);
  process.on(&#x27;SIGINT&#x27;, showCursor);
  process.on(&#x27;SIGINT&#x27;, process.exit.bind(null, 1));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.readConfig" id="apidoc.element.up.readConfig">
        function <span class="apidocSignatureSpan">up.</span>readConfig
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readConfig = function (){
  var json, obj;

  // read
  try {
    json = fs.readFileSync(exports.configPath, &#x27;utf8&#x27;);
  } catch (err) {
    console.error(&#x27;\n  Failed to load configuration.&#x27;);
    console.error(&#x27;  Execute: `up config` to get started!\n&#x27;);
    process.exit(1);
  }

  // parse
  try {
    obj = JSON.parse(json);
  } catch (err) {
    console.error(&#x27;\n  Failed to parse &#x27; + exports.configPath + &#x27;\n&#x27;);
    process.exit(1);
  }

  // validate
  if (!(obj.user &#x26;&#x26; obj.token)) {
    console.error(&#x27;\n  Auth token missing.&#x27;);
    console.error(&#x27;  Execute: `up config` to get a token!\n&#x27;);
    process.exit(1);
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.saveConfig" id="apidoc.element.up.saveConfig">
        function <span class="apidocSignatureSpan">up.</span>saveConfig
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">saveConfig = function (obj){
  var json = JSON.stringify(obj, null, 2) + &#x27;\n&#x27;;
  fs.writeFileSync(exports.configPath, json);
  // chmod the config file to rw for owner only to prevent other users from
  // stealing the token
  fs.chmodSync(exports.configPath, 0600);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.up.console" id="apidoc.module.up.console">module up.console</a></h1>


    <h2>
        <a href="#apidoc.element.up.console.console" id="apidoc.element.up.console.console">
        function <span class="apidocSignatureSpan">up.</span>console
        <span class="apidocSignatureSpan">(stream, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Console(stream, options) {
  this.y = 0;
  this.newlines = 0;
  this.items = [];
  this.cursor = ansi(process.stdout);
  this.stream = stream;
  this.direct = options.direct;
  this.progressOnly = options.progressOnly;

  // bind event listeners to `this`
  this.onitem = this.onitem.bind(this);
  this.onsave = this.onsave.bind(this);
  this.onend = this.onend.bind(this);

  // attach event listeners to `stream`
  stream.on(&#x27;item&#x27;, this.onitem);
  stream.on(&#x27;save&#x27;, this.onsave);
  stream.on(&#x27;end&#x27;, this.onend);

  // setup the cursor and global event listeners
  this.cursor.hide();
  var self = this;
  function showCursor(){
    self.cursor.show();
  }
  process.on(&#x27;uncaughtException&#x27;, showCursor);
  process.on(&#x27;uncaughtException&#x27;, fatal);
  process.on(&#x27;exit&#x27;, showCursor);
  process.on(&#x27;SIGINT&#x27;, showCursor);
  process.on(&#x27;SIGINT&#x27;, process.exit.bind(null, 1));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.up.console.prototype" id="apidoc.module.up.console.prototype">module up.console.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.up.console.prototype.aggregate" id="apidoc.element.up.console.prototype.aggregate">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>aggregate
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">aggregate = function (item){
  var self = this;
  item.progress = 0;
  item.on(&#x27;progress&#x27;, function(e){
    item.progress = e.percent;
    self.update();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @api private
*/

Console.prototype.onitem = function(item){
 this.items.push(item);
 if (this.progressOnly) {
   this.<span class="apidocCodeKeywordSpan">aggregate</span>(item);
 } else {
   this.progress(item);
 }
};

/**
* Item aggregate progress.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console.prototype.log" id="apidoc.element.up.console.prototype.log">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>log
        <span class="apidocSignatureSpan">(y, key, str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (y, key, str){

  var up = 0;
  var moved = false;
  if (this.cursor.enabled) {
    // first ensure that we&#x27;ve at least written `y` newlines by now
    while (this.newlines &#x3c; y) {
      this.cursor.write(&#x27;\n&#x27;);
      this.newlines++;
    }

    // at this point, we may need to move the cursor up one or more
    // rows in order to be on the correct `y` line before writing
    up = this.newlines - y;
    moved = false;
    if (up &#x3e; 0) {
      moved = true;
      this.cursor.up(up);
    }
  }

  // now that we know we&#x27;re on the correct `y` line, output the text
  this.cursor
    .fg.cyan()
    .write(sprintf(&#x27;%25s&#x27;, key))
    .fg.reset()
    .write(&#x27; : &#x27;)
    .fg.brightBlack()
    .write(str)
    .fg.reset()
    .write(&#x27;\n&#x27;);

  if (this.cursor.enabled) {
    up--; // subtract from `up` since we just output a \n
    if (up &#x3e; 0) {
      this.cursor.down(up);
    }
    if (!moved) {
      // if we didn&#x27;t call `cursor.up()` before, then we can increment the \n count
      this.newlines++;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @api private
*/

Console.prototype.update = function(){
 var len = this.items.length;
 var percent = sum(this.items, &#x27;progress&#x27;) / len | 0;
 this.<span class="apidocCodeKeywordSpan">log</span>(0, len + &#x27; items&#x27;, percent + &#x27;%&#x27;);
};

/**
* Item progress reporting.
*
* @api private
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console.prototype.onend" id="apidoc.element.up.console.prototype.onend">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>onend
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onend = function (){
  // no-op
  //var y = this.progressOnly ? 2 : this.items.length + 1;
  //this.log(y, &#x27;that\&#x27;s all&#x27;, &#x27;folks!&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console.prototype.onitem" id="apidoc.element.up.console.prototype.onitem">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>onitem
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onitem = function (item){
  this.items.push(item);
  if (this.progressOnly) {
    this.aggregate(item);
  } else {
    this.progress(item);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console.prototype.onsave" id="apidoc.element.up.console.prototype.onsave">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>onsave
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onsave = function (){
  var y = this.progressOnly ? 1 : this.items.length;
  this.log(y, &#x27;stream&#x27;, this.stream.url);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console.prototype.progress" id="apidoc.element.up.console.prototype.progress">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>progress
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">progress = function (item){
  var y = this.y++;
  var self = this;
  var direct = this.direct;
  var cursor = this.cursor;

  function onprogress(e){
    var n = e.percent | 0;
    self.log(y, ctx(item), n + &#x27;%&#x27;);
  }

  function onend(){
    var url = direct ? item.direct_url : item.url;
    self.log(y, ctx(item), url);
  }

  if (cursor.enabled) {
    process.nextTick(function(){
      // fire off a fake 0% event so that the line gets rendered
      item.emit(&#x27;progress&#x27;, 0);
    });

    item.on(&#x27;progress&#x27;, onprogress);
  }

  item.on(&#x27;end&#x27;, onend);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/

Console.prototype.onitem = function(item){
 this.items.push(item);
 if (this.progressOnly) {
   this.aggregate(item);
 } else {
   this.<span class="apidocCodeKeywordSpan">progress</span>(item);
 }
};

/**
* Item aggregate progress.
*
* @api private
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.up.console.prototype.update" id="apidoc.element.up.console.prototype.update">
        function <span class="apidocSignatureSpan">up.console.prototype.</span>update
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (){
  var len = this.items.length;
  var percent = sum(this.items, &#x27;progress&#x27;) / len | 0;
  this.log(0, len + &#x27; items&#x27;, percent + &#x27;%&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/

Console.prototype.aggregate = function(item){
 var self = this;
 item.progress = 0;
 item.on(&#x27;progress&#x27;, function(e){
   item.progress = e.percent;
   self.<span class="apidocCodeKeywordSpan">update</span>();
 });
};

/**
* Update aggregate progress.
*
* @api private
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
